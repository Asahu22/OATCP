The subarray with the greatest product is determined in this problem by initializing ans to LLONG_MIN, pref and suff to 0, which represent the prefix and suffix products of the numbers, respectively. By multiplying pref and suff with the current element and the element from the array's end, respectively, modulo MOD, the method iterates through the array. It resets them to 1 if either goes to zero. It records the maximum of ans, pref, and suff (modulo MOD) as the maximum product of ans. By taking into consideration both positive and negative product possibilities, this technique effectively handles arrays containing negative values. It makes sure that the algorithm investigates several subarray combinations to find the one with the largest product while accounting for the impact of negative numbers on the product calculation.

Time Complexity : O(n) Space Complexity : O(1)